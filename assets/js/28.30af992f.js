(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{308:function(a,e,s){"use strict";s.r(e);var t=s(14),n=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"elaboracion-dun-componente"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elaboracion-dun-componente"}},[a._v("#")]),a._v(" Elaboración dun compoñente")]),a._v(" "),e("p",[a._v("Nos seguintes apartados vaise ilustrar a elaboración dun compoñente personalizado\nutilizando a ferramenta NetBeans.")]),a._v(" "),e("p",[a._v("O compoñente a elaborar será dun JPanel personalizado con unha imaxe de fondo.\nAdemais, permitirase configurar a transparencia da imaxe para que ao engadir outros\ncompoñentes dentro do panel se vexan ben sobre a imaxe.")]),a._v(" "),e("p",[a._v("O primeiro a realizar é crear un novo proxecto en NetBeans chamado JPanelImaxe con un\npaquete no seu interior chamado tamén "),e("strong",[a._v("jpanelimaxe")]),a._v(" e unha clase chamada JPanelImaxe.")]),a._v(" "),e("p",[a._v("Como o compoñente vai ter as propiedades dun JPanel, debe estender este compoñente.")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanel")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("A clase que implementa o compoñente ten que ser un JavaBean. Para que unha clase Java\nsexa un JavaBean ten que cumprir unhas características:")]),a._v(" "),e("p",[a._v("  - Ten que implementar Serializable")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanel")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("implements")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Serializable")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("  - Ten que ter un construtor sen parámetros.")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Con isto xa teriamos un compoñente básico creado e podería engadirse á paleta de\nNetBeans.")]),a._v(" "),e("p",[a._v("Neste caso imos engadir a maiores unha propiedade ao compoñente que almacenará a ruta\nda imaxe de fondo do panel "),e("strong",[a._v("rutaImaxe")]),a._v(". De tal forma que cando o compoñente se engada a unha aplicación Java, entre a lista de propiedades saia "),e("strong",[a._v("rutaImaxe")]),a._v(" para poder modificala.")]),a._v(" "),e("p",[a._v("Nesta primeira versión, para a propiedade "),e("strong",[a._v("rutaImaxe")]),a._v(", crearase unha propiedade simple de tipo "),e("strong",[a._v("String")]),a._v(" e tamén se engadirán os métodos get e set. Recoméndase xeralos con NetBeans para non confundirse ao establecer os seus nomes. Se non se escriben ben, a paleta de NetBeans non os recoñecerá.")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanel")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("implements")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Serializable")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" rutaImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getRutaImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" rutaImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setRutaImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" rutaImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rutaImaxe "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" rutaImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Simplemente con isto, se se compila o compoñente (Clean and Build) xa se podería engadir o compoñente á paleta de NetBeans. Para iso hai que pulsar co "),e("strong",[a._v("botón dereito no compoñente -> Ferramentas -> Add to Palette")]),a._v(". Seleccionar a categoría Beans, para ter organizados os Beans personalizados creados.")]),a._v(" "),e("p",[a._v("Para comprobar que funciona pódese crear un novo proxecto Java e engadir un JFrame.\nUnha vez creado o JFrame, engadir o novo compoñente creado da paleta Beans.")]),a._v(" "),e("p",[e("strong",[a._v("NOTA")]),a._v(": se o compoñente non aparece na paleta, hai que actualizala.")]),a._v(" "),e("p",[a._v("Unha vez engadido o compoñente JPanelImaxe creado, comprobar que ten unha\npropiedade de tipo String chamada "),e("strong",[a._v("rutaImaxe")]),a._v(".")]),a._v(" "),e("p",[a._v("O valor da propiedade pode modificarse directamente na ventá anterior ou, se se pulsa o\nbotón [...] da súa dereita, abrirase o editor personalizado:")]),a._v(" "),e("p",[a._v("NetBeans proporciona editores por defecto para as propiedades simples: String, int, float, boolean (mostraría un checkbox).")]),a._v(" "),e("p",[a._v("As propiedades de tipo Cor tamén teñen un editor por defecto en NetBeans.")]),a._v(" "),e("p",[a._v("Se a propiedade é Font, mostra o editor personalizado para os tipos de letra.")]),a._v(" "),e("p",[a._v("No caso de que a propiedade sexa de tipo File, o editor que mostra NetBeans é un explorador de arquivos.")]),a._v(" "),e("p",[a._v("A continuación vaise modificar o compoñentes para que, en lugar de ter un String para\nalmacenar a ruta da imaxe, sexa unha variable de tipo File para almacenar o ficheiro\nasociado a dita imaxe:")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanel")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("implements")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Serializable")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("File")]),a._v(" ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JPanelImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("File")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getFicheiroImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setFicheiroImaxe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("File")]),a._v(" ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ficheiroImaxe "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Hai que volver a pintar o compoñente cada vez que se cambia a imaxe")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("repaint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Pode probarse a compilar o compoñente (Clean and Build) e engadilo a un JFrame. Sempre\nque se actualiza un compoñente, hai que borrar o antigo do JFrame de proba e engadir o\nnovo.")]),a._v(" "),e("p",[a._v("Comprobar agora que ao acceder ao editor da propiedade ficheiroImaxe se mostrara o\nexplorador de arquivos:")]),a._v(" "),e("p",[a._v("A continuación haberá que implementar o código necesario para que a imaxe seleccionada\nse estableza como imaxe de fondo do compoñente. Para iso é necesario saber cal é o\nmétodo que se adica a pintar o compoñente.")]),a._v(" "),e("p",[a._v("Non é necesario coñecer todos os métodos dun compoñente. A maioría das veces haberá\nque buscar en internet cal é o que se necesita e modificalo. Neste caso, o método que pinta a imaxe é "),e("a",{attrs:{href:"https://docs.oracle.com/en/java/javase/15/docs/api/java.desktop/javax/swing/JComponent.html#paintComponent(java.awt.Graphics)",target:"_blank",rel:"noopener noreferrer"}},[a._v("paintComponent"),e("OutboundLink")],1),a._v(" de "),e("a",{attrs:{href:"https://docs.oracle.com/en/java/javase/15/docs/api/java.desktop/javax/swing/JComponent.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("JComponent"),e("OutboundLink")],1),a._v(". Como a clase JPanelImaxe xa herda de JComponent, haberá que sobrescribir o método coa axuda de NetBeans: botón dereito na "),e("strong",[a._v("clase JPanelImaxe -> Insert Code -> Override Method")]),a._v(". Buscar o método paintComponent de JComponent.")]),a._v(" "),e("div",{staticClass:"language-java extra-class"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Override")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("protected")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("paintComponent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Graphics")]),a._v(" g"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("super")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("paintComponent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("g"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ficheiroImaxe "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ImageIcon")]),a._v(" imageIcon "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ImageIcon")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ficheiroImaxe"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getAbsolutePath")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        g"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("drawImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("imageIcon"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Fixarse na comprobación que se fai co "),e("strong",[a._v("if")]),a._v(". Faise para asegurar que a propiedade teña un  valor e a imaxe exista. Poderían facerse máis comprobacións para asegurar que o código funciona correctamente.")]),a._v(" "),e("p",[a._v("Podemos volver a compilar o compoñente (Clean and Build) e engadilo ao JFrame. Asignar\nunha imaxe á propiedade rutaImaxe e comprobar que se amosa como imaxe de fondo do\npanel.")]),a._v(" "),e("p",[a._v("Dado que o compoñente é un JPanel, tamén poderían engadirse máis elementos á ventá.")]),a._v(" "),e("p",[a._v("Tamén podemos probar a executar a aplicación e comprobar que funciona:")]),a._v(" "),e("p",[a._v("A continuación imos ver como cambiar a opacidade da imaxe para que quede máis\ntransparente e se visualicen mellor os compoñentes que se engadan ao panel: etiquetas,\nbotóns, caixas de texto, …")])])}),[],!1,null,null,null);e.default=n.exports}}]);